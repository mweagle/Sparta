<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.79.0" />
    <meta name="description" content="Sparta - AWS Lambda Microservices">
<meta name="author" content="Matt Weagle">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Dynamic Infrastructure :: Sparta - AWS Lambda Microservices</title>

    
    <link href="/css/nucleus.css?1610325426" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1610325426" rel="stylesheet">
    <link href="/css/hybrid.css?1610325426" rel="stylesheet">
    <link href="/css/featherlight.min.css?1610325426" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1610325426" rel="stylesheet">
    <link href="/css/auto-complete.css?1610325426" rel="stylesheet">
    <link href="/css/theme.css?1610325426" rel="stylesheet">
    <link href="/css/hugo-theme.css?1610325426" rel="stylesheet">
    
    <link href="/css/theme-sparta.css?1610325426" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1610325426"></script>
    <script src="/js/highlight.pack.js?1610325426"></script>
    <link href="/css/vs.css?1610325426" rel="stylesheet">
    <script>hljs.initHighlightingOnLoad();</script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
<style type="text/css">
pre {
    padding: 2px;
}
</style>


  </head>
  <body class="" data-url="/reference/decorators/dynamic_infrastructure/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a href="/"><img src="/images/SpartaLogoNoDomain.png" height="50%" width="50%"/></a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1610325426"></script>
<script type="text/javascript" src="/js/auto-complete.js?1610325426"></script>
<script type="text/javascript">
    
        var baseurl = "\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1610325426"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/getting_started/" title="Getting Started" class="dd-item
        
        
        
        ">
      <a href="/getting_started/">
          Getting Started
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/example_service/" title="Example Service" class="dd-item
        
        
        
        ">
      <a href="/example_service/">
          Example Service
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/example_service/step1/" title="Overview" class="dd-item ">
        <a href="/example_service/step1/">
        Overview
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/example_service/step2/" title="Details" class="dd-item ">
        <a href="/example_service/step2/">
        Details
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/concepts/" title="Concepts" class="dd-item
        
        
        
        ">
      <a href="/concepts/">
          Concepts
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/reference/" title="Reference" class="dd-item
        parent
        
        
        ">
      <a href="/reference/">
          Reference
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/reference/apigateway/" title="" class="dd-item
        
        
        
        ">
      <a href="/reference/apigateway/">
          <b>API Gateway</b>
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/reference/apigateway/echo_event/" title="Echo" class="dd-item ">
        <a href="/reference/apigateway/echo_event/">
        Echo
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/apigateway/request_params/" title="Request Parameters" class="dd-item ">
        <a href="/reference/apigateway/request_params/">
        Request Parameters
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/apigateway/context/" title="Request Context" class="dd-item ">
        <a href="/reference/apigateway/context/">
        Request Context
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/apigateway/cors/" title="CORS" class="dd-item ">
        <a href="/reference/apigateway/cors/">
        CORS
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/apigateway/slack/" title="Slack SlashCommand" class="dd-item ">
        <a href="/reference/apigateway/slack/">
        Slack SlashCommand
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/apigateway/s3site/" title="S3 Sites with CORS" class="dd-item ">
        <a href="/reference/apigateway/s3site/">
        S3 Sites with CORS
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/reference/apiv2gateway/" title="" class="dd-item
        
        
        
        ">
      <a href="/reference/apiv2gateway/">
          <b>API V2 Gateway</b>
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/reference/eventsources/" title="" class="dd-item
        
        
        
        ">
      <a href="/reference/eventsources/">
          <b>Event Sources</b>
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/reference/eventsources/codecommit/" title="CodeCommit" class="dd-item ">
        <a href="/reference/eventsources/codecommit/">
        CodeCommit
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/eventsources/cloudformation/" title="CloudFormation" class="dd-item ">
        <a href="/reference/eventsources/cloudformation/">
        CloudFormation
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/eventsources/cloudwatchevents/" title="CloudWatch Events" class="dd-item ">
        <a href="/reference/eventsources/cloudwatchevents/">
        CloudWatch Events
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/eventsources/cloudwatchlogs/" title="CloudWatch Logs" class="dd-item ">
        <a href="/reference/eventsources/cloudwatchlogs/">
        CloudWatch Logs
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/eventsources/cognito/" title="Cognito" class="dd-item ">
        <a href="/reference/eventsources/cognito/">
        Cognito
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/eventsources/dynamodb/" title="DynamoDB" class="dd-item ">
        <a href="/reference/eventsources/dynamodb/">
        DynamoDB
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/eventsources/kinesis/" title="Kinesis" class="dd-item ">
        <a href="/reference/eventsources/kinesis/">
        Kinesis
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/eventsources/s3/" title="S3" class="dd-item ">
        <a href="/reference/eventsources/s3/">
        S3
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/eventsources/ses/" title="SES" class="dd-item ">
        <a href="/reference/eventsources/ses/">
        SES
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/eventsources/sns/" title="SNS" class="dd-item ">
        <a href="/reference/eventsources/sns/">
        SNS
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/eventsources/sqs/" title="SQS" class="dd-item ">
        <a href="/reference/eventsources/sqs/">
        SQS
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/reference/archetypes/" title="" class="dd-item
        
        
        
        ">
      <a href="/reference/archetypes/">
          <b>Archetype Constructors</b>
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/reference/archetypes/event_bridge/" title="Event Bridge" class="dd-item ">
        <a href="/reference/archetypes/event_bridge/">
        Event Bridge
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/archetypes/codecommit/" title="CodeCommit" class="dd-item ">
        <a href="/reference/archetypes/codecommit/">
        CodeCommit
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/archetypes/cloudwatch/" title="CloudWatch" class="dd-item ">
        <a href="/reference/archetypes/cloudwatch/">
        CloudWatch
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/archetypes/dynamodb/" title="DynamoDB" class="dd-item ">
        <a href="/reference/archetypes/dynamodb/">
        DynamoDB
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/archetypes/kinesis/" title="Kinesis" class="dd-item ">
        <a href="/reference/archetypes/kinesis/">
        Kinesis
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/archetypes/kinesis_firehose/" title="Kinesis Firehose" class="dd-item ">
        <a href="/reference/archetypes/kinesis_firehose/">
        Kinesis Firehose
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/archetypes/rest/" title="REST Service" class="dd-item ">
        <a href="/reference/archetypes/rest/">
        REST Service
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/archetypes/s3/" title="S3" class="dd-item ">
        <a href="/reference/archetypes/s3/">
        S3
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/archetypes/sns/" title="SNS" class="dd-item ">
        <a href="/reference/archetypes/sns/">
        SNS
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/reference/decorators/" title="" class="dd-item
        parent
        
        
        ">
      <a href="/reference/decorators/">
          <b>Build-Time Decorators</b>
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/reference/decorators/application_load_balancer/" title="Application Load Balancer" class="dd-item ">
        <a href="/reference/decorators/application_load_balancer/">
        Application Load Balancer
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/decorators/cloudmap/" title="CloudMap Service Discovery" class="dd-item ">
        <a href="/reference/decorators/cloudmap/">
        CloudMap Service Discovery
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/decorators/cloudfront_distribution/" title="CloudFront Distribution" class="dd-item ">
        <a href="/reference/decorators/cloudfront_distribution/">
        CloudFront Distribution
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/decorators/lambda_versioning/" title="Lambda Versioning Decorator" class="dd-item ">
        <a href="/reference/decorators/lambda_versioning/">
        Lambda Versioning Decorator
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/decorators/publish_outputs/" title="Publishing Outputs" class="dd-item ">
        <a href="/reference/decorators/publish_outputs/">
        Publishing Outputs
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/decorators/s3_artifact_publisher/" title="S3 Artifact Publisher" class="dd-item ">
        <a href="/reference/decorators/s3_artifact_publisher/">
        S3 Artifact Publisher
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/decorators/dynamic_infrastructure/" title="Dynamic Infrastructure" class="dd-item active">
        <a href="/reference/decorators/dynamic_infrastructure/">
        Dynamic Infrastructure
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/reference/interceptors/" title="" class="dd-item
        
        
        
        ">
      <a href="/reference/interceptors/">
          <b>Runtime Interceptors</b>
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/reference/interceptors/xray_interceptor/" title="XRayInterceptor" class="dd-item ">
        <a href="/reference/interceptors/xray_interceptor/">
        XRayInterceptor
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/reference/cli_options/" title="" class="dd-item
        
        
        
        ">
      <a href="/reference/cli_options/">
          <b>Command Line Options</b>
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/reference/application/" title="" class="dd-item
        
        
        
        ">
      <a href="/reference/application/">
          <b>Application Customization</b>
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/reference/application/custom_commands/" title="Custom Commands" class="dd-item ">
        <a href="/reference/application/custom_commands/">
        Custom Commands
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/application/custom_flags/" title="Custom Flags" class="dd-item ">
        <a href="/reference/application/custom_flags/">
        Custom Flags
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/application/environments/" title="Managing Environments" class="dd-item ">
        <a href="/reference/application/environments/">
        Managing Environments
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/application/custom_lambda_resources/" title="CloudFormation Resources" class="dd-item ">
        <a href="/reference/application/custom_lambda_resources/">
        CloudFormation Resources
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/application/custom_resources/" title="Custom Resources" class="dd-item ">
        <a href="/reference/application/custom_resources/">
        Custom Resources
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/reference/step/" title="" class="dd-item
        
        
        
        ">
      <a href="/reference/step/">
          <b>Step Functions</b>
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/reference/step/lambda/" title="Lambda" class="dd-item ">
        <a href="/reference/step/lambda/">
        Lambda
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/step/fargate/" title="Fargate" class="dd-item ">
        <a href="/reference/step/fargate/">
        Fargate
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/reference/step/services/" title="" class="dd-item
        
        
        
        ">
      <a href="/reference/step/services/">
          <b>Service Integrations</b>
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/reference/step/services/dynamodb/" title="Amazon DynamoDB" class="dd-item ">
        <a href="/reference/step/services/dynamodb/">
        Amazon DynamoDB
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/step/services/sagemaker/" title="Amazon SageMaker" class="dd-item ">
        <a href="/reference/step/services/sagemaker/">
        Amazon SageMaker
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/step/services/sns/" title="Amazon SNS" class="dd-item ">
        <a href="/reference/step/services/sns/">
        Amazon SNS
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/step/services/sqs/" title="Amazon SQS" class="dd-item ">
        <a href="/reference/step/services/sqs/">
        Amazon SQS
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/step/services/batch/" title="AWS Batch" class="dd-item ">
        <a href="/reference/step/services/batch/">
        AWS Batch
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/step/services/fargate/" title="AWS Fargate" class="dd-item ">
        <a href="/reference/step/services/fargate/">
        AWS Fargate
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/step/services/glue/" title="AWS Glue" class="dd-item ">
        <a href="/reference/step/services/glue/">
        AWS Glue
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/discovery/" title="Discovery Service" class="dd-item ">
        <a href="/reference/discovery/">
        Discovery Service
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/docker/" title="Docker" class="dd-item ">
        <a href="/reference/docker/">
        Docker
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/hybrid_topologies/" title="Hybrid Topologies" class="dd-item ">
        <a href="/reference/hybrid_topologies/">
        Hybrid Topologies
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/reference/operations/" title="" class="dd-item
        
        
        
        ">
      <a href="/reference/operations/">
          <b>Operations</b>
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/reference/operations/magefile/" title="Magefiles" class="dd-item ">
        <a href="/reference/operations/magefile/">
        Magefiles
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/operations/cloudwatch_alarms/" title="CloudWatch Alarms" class="dd-item ">
        <a href="/reference/operations/cloudwatch_alarms/">
        CloudWatch Alarms
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/operations/cloudwatch_dashboard/" title="CloudWatch Dashboard" class="dd-item ">
        <a href="/reference/operations/cloudwatch_dashboard/">
        CloudWatch Dashboard
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/operations/codedeploy_service_update/" title="CodeDeploy Service Update" class="dd-item ">
        <a href="/reference/operations/codedeploy_service_update/">
        CodeDeploy Service Update
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/operations/cicd/" title="CI/CD" class="dd-item ">
        <a href="/reference/operations/cicd/">
        CI/CD
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/operations/deployment_strategies/" title="Deployment Strategies" class="dd-item ">
        <a href="/reference/operations/deployment_strategies/">
        Deployment Strategies
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/operations/metrics_publisher/" title="Metrics Publisher" class="dd-item ">
        <a href="/reference/operations/metrics_publisher/">
        Metrics Publisher
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/operations/profiling/" title="Profiling" class="dd-item ">
        <a href="/reference/operations/profiling/">
        Profiling
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/reference/oci/" title="OCI" class="dd-item
        
        
        
        ">
      <a href="/reference/oci/">
          OCI
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/reference/testing/" title="Testing" class="dd-item
        
        
        
        ">
      <a href="/reference/testing/">
          Testing
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/supporting_packages/" title="Supporting Packages" class="dd-item ">
        <a href="/reference/supporting_packages/">
        Supporting Packages
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/limitations/" title="Limitations" class="dd-item ">
        <a href="/reference/limitations/">
        Limitations
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/reference/faq/" title="FAQ" class="dd-item ">
        <a href="/reference/faq/">
        FAQ
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/presentations/" title="Presentations" class="dd-item
        
        
        
        ">
      <a href="/presentations/">
          Presentations
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/meta/" title="Meta" class="dd-item
        
        
        
        ">
      <a href="/meta/">
          Meta
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/credits/" title="Credits" class="dd-item
        
        
        
        ">
      <a href="/credits/">
          Credits
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://aws.amazon.com/lambda/"><i class='fab fa-aws'></i> AWS Lambda</a>
              </li>
          
              <li>
                  <a class="padding" href="https://github.com/mweagle/Sparta"><i class='fab fa-fw fa-github'></i> Github repo</a>
              </li>
          
              <li>
                  <a class="padding" href="https://github.com/mweagle?utf8=%E2%9C%93&amp;tab=repositories&amp;q=Sparta&amp;type=&amp;language="><i class='fas fa-fw fa-camera'></i> Examples</a>
              </li>
          
              <li>
                  <a class="padding" href="https://github.com/mweagle/Sparta/blob/master/CHANGES.md"><i class='fas fa-fw fa-signal'></i> Release History</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      

      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      
  Build: <a target="_blank" href="https://github.com/mweagle/Sparta/commit/2e0511e7">2e0511e7</a><p/>
  Date: 2021-01-10T16:37:06-08:00


<p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/mweagle/Sparta/tree/docs/content/reference/decorators/dynamic_infrastructure.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/'></a> > <a href='/reference/'>Reference</a> > <a href='/reference/decorators/'></a> > Dynamic Infrastructure
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#unique-resource-names">Unique Resource Names</a></li>
  </ul>

  <ul>
    <li><a href="#lambda-function">Lambda Function</a></li>
    <li><a href="#s3-resource-name">S3 Resource Name</a></li>
    <li><a href="#sparta-integration">Sparta Integration</a>
      <ul>
        <li><a href="#dynamic-iam-role-privilege">Dynamic IAM Role Privilege</a></li>
        <li><a href="#dynamic-s3-permissions">Dynamic S3 Permissions</a></li>
      </ul>
    </li>
    <li><a href="#s3-resource-insertion">S3 Resource Insertion</a>
      <ul>
        <li><a href="#dependencies">Dependencies</a></li>
      </ul>
    </li>
    <li><a href="#code-listing">Code Listing</a></li>
    <li><a href="#wrapping-up">Wrapping Up</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Dynamic Infrastructure
            </h1>
          

        


<p>In addition to provisioning AWS Lambda functions, Sparta supports the creation of
other <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html">CloudFormation Resources</a>.
This enables a service to move towards <a href="https://fugue.co/oreilly/">immutable infrastructure</a>,
where the service and its infrastructure requirements are treated as a logical unit.</p>
<p>For instance, consider the case where two developers are working in the same AWS account.</p>
<ul>
<li>Developer 1 is working on analyzing text documents.
<ul>
<li>Their lambda code is triggered in response to uploading sample text documents to S3.</li>
</ul>
</li>
<li>Developer 2 is working on image recognition.
<ul>
<li>Their lambda code is triggered in response to uploading sample images to S3.</li>
</ul>
</li>
</ul>

<div class="mermaid" align="center">
graph LR
sharedBucket[S3 Bucket]

dev1Lambda[Dev1 LambdaCode]
dev2Lambda[Dev2 LambdaCode]

sharedBucket --> dev1Lambda
sharedBucket --> dev2Lambda
</div>

<p>Using a shared, externally provisioned S3 bucket has several impacts:</p>
<ul>
<li>Adding conditionals in each lambda codebase to scope valid processing targets.</li>
<li>Ambiguity regarding which codebase handled an event.</li>
<li>Infrastructure ownership/lifespan management. When a service is decommissioned, its infrastructure requirements may be automatically decommissioned as well.
<ul>
<li>Eg, &ldquo;Is this S3 bucket in use by any service?&rdquo;.</li>
</ul>
</li>
<li>Overly permissive IAM roles due to static Arns.
<ul>
<li>Eg, &ldquo;Arn hugging&rdquo;.</li>
</ul>
</li>
<li>Contention updating the shared bucket&rsquo;s <a href="http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html#putBucketNotificationConfiguration-property">notification configuration</a>.</li>
</ul>
<p>Alternatively, each developer could provision and manage disjoint topologies:</p>

<div class="mermaid" align="center">
graph LR
dev1S3Bucket[Dev1 S3 Bucket]
dev1Lambda[Dev1 LambdaCode]

dev2S3Bucket[Dev2 S3 Bucket]
dev2Lambda[Dev2 LambdaCode]

dev1S3Bucket --> dev1Lambda
dev2S3Bucket --> dev2Lambda
</div>

<p>Enabling each developer to create other AWS resources also means more complex topologies can be expressed. These topologies can benefit from CloudWatch monitoring (eg, <a href="http://docs.aws.amazon.com/lambda/latest/dg/monitoring-functions-metrics.html">per-Lambda Metrics</a> ) without the need to add <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/publishingMetrics.html">custom metrics</a>.</p>

<div class="mermaid" align="center">
graph LR
dev1S3Bucket[Dev1 S3 Bucket]
dev1Lambda[Dev1 LambdaCode]

dev2S3Bucket[Dev2 S3 Images Bucket]
dev2PNGLambda[Dev2 PNG LambdaCode]
dev2JPGLambda[Dev2 JPEG LambdaCode]
dev2TIFFLambda[Dev2 TIFF LambdaCode]
dev2S3VideoBucket[Dev2 VideoBucket]
dev2VideoLambda[Dev2 Video LambdaCode]

dev1S3Bucket --> dev1Lambda
dev2S3Bucket -->|SuffixFilter=_.PNG|dev2PNGLambda
dev2S3Bucket -->|SuffixFilter=_.JPEG,_.JPG|dev2JPGLambda
dev2S3Bucket -->|SuffixFilter=_.TIFF|dev2TIFFLambda
dev2S3VideoBucket -->dev2VideoLambda
</div>

<p>Sparta supports Dynamic Resources via <a href="https://godoc.org/github.com/mweagle/Sparta#TemplateDecoratorHandler">TemplateDecoratorHandler</a> satisfying
types.</p>
<h1 id="template-decorator-handler">Template Decorator Handler</h1>
<p>A template decorator is a <strong>go</strong> interface:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go"><span style="color:#00f">type</span> TemplateDecoratorHandler <span style="color:#00f">interface</span> {
	DecorateTemplate(serviceName <span style="color:#2b91af">string</span>,
		lambdaResourceName <span style="color:#2b91af">string</span>,
		lambdaResource gocf.LambdaFunction,
		resourceMetadata <span style="color:#00f">map</span>[<span style="color:#2b91af">string</span>]<span style="color:#00f">interface</span>{},
		S3Bucket <span style="color:#2b91af">string</span>,
		S3Key <span style="color:#2b91af">string</span>,
		buildID <span style="color:#2b91af">string</span>,
		template *gocf.Template,
		context <span style="color:#00f">map</span>[<span style="color:#2b91af">string</span>]<span style="color:#00f">interface</span>{},
		logger *zerolog.Logger) <span style="color:#2b91af">error</span>
}
</code></pre></div><p>Clients use <a href="https://godoc.org/github.com/mweagle/go-cloudformation">go-cloudformation</a>
types for CloudFormation resources and <code>template.AddResource</code> to add them to
the <code>*template</code> parameter. After a decorator is invoked, Sparta also verifies that
the user-supplied function did not add entities that that collide with the
internally-generated ones.</p>
<h2 id="unique-resource-names">Unique Resource Names</h2>
<p>CloudFormation uses <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/resources-section-structure.html">Logical IDs</a>
as resource key names.</p>
<p>To minimize collision likelihood, Sparta publishes <a href="https://godoc.org/github.com/mweagle/Sparta#CloudFormationResourceName">CloudFormationResourceName(prefix, &hellip;parts)</a> to generate compliant identifiers. To produce content-based hash values, callers can provide a non-empty set of values as the <code>...parts</code> variadic argument. This produces stable identifiers across Sparta execution (which may affect availability during updates).</p>
<p>When called with only a single value (eg: <code>CloudFormationResourceName(&quot;myResource&quot;)</code>), Sparta will return a random resource name that is <strong>NOT</strong> stable across executions.</p>
<h1 id="example---s3-bucket">Example - S3 Bucket</h1>
<p>Let&rsquo;s work through an example to make things a bit more concrete. We have the following requirements:</p>
<ul>
<li>Our lambda function needs a immutable-infrastructure compliant S3 bucket</li>
<li>Our lambda function should be notified when items are created or deleted from the bucket</li>
<li>Our lambda function must be able to access the contents in the bucket (not shown below)</li>
</ul>
<h2 id="lambda-function">Lambda Function</h2>
<p>To start with, we&rsquo;ll need a Sparta lambda function to expose:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go"><span style="color:#00f">import</span> (
  awsLambdaEvents <span style="color:#a31515">&#34;github.com/aws/aws-lambda-go/events&#34;</span>
)
<span style="color:#00f">func</span> echoS3DynamicBucketEvent(ctx context.Context,
  s3Event awsLambdaEvents.S3Event) (*awsLambdaEvents.S3Event, <span style="color:#2b91af">error</span>) {
	logger, _ := ctx.Value(sparta.ContextKeyRequestLogger).(*zerolog.Logger)
  discoveryInfo, discoveryInfoErr := sparta.Discover()

  logger.Info().
    Interface(<span style="color:#a31515">&#34;Event&#34;</span>, s3Event).
    Interface(<span style="color:#a31515">&#34;Discovery&#34;</span>, discoveryInfo).
    Err(discoveryInfoErr).
    Msg(<span style="color:#a31515">&#34;Event received&#34;</span>)

	<span style="color:#00f">return</span> &amp;s3Event, <span style="color:#00f">nil</span>
}
</code></pre></div><p>For brevity our demo function doesn&rsquo;t access the S3 bucket objects.
To support that please see the <a href="/reference/discovery">sparta.Discover</a> functionality.</p>
<h2 id="s3-resource-name">S3 Resource Name</h2>
<p>The next thing we need is a <em>Logical ID</em> for our bucket:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go">s3BucketResourceName := sparta.CloudFormationResourceName(<span style="color:#a31515">&#34;S3DynamicBucket&#34;</span>, <span style="color:#a31515">&#34;myServiceBucket&#34;</span>)
</code></pre></div><h2 id="sparta-integration">Sparta Integration</h2>
<p>With these two values we&rsquo;re ready to get started building up the lambda function:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go">lambdaFn, _ := sparta.NewAWSLambda(sparta.LambdaName(echoS3DynamicBucketEvent),
  echoS3DynamicBucketEvent,
  sparta.IAMRoleDefinition{})
</code></pre></div><p>The open issue is how to publish the CloudFormation-defined S3 Arn to the <code>compile</code>-time application. Our lambda function needs to provide both:</p>
<ul>
<li><a href="https://godoc.org/github.com/mweagle/Sparta#IAMRolePrivilege">IAMRolePrivilege</a> values that reference the (as yet) undefined Arn.</li>
<li><a href="https://godoc.org/github.com/mweagle/Sparta#S3Permission">S3Permission</a> values to configure our lambda&rsquo;s event triggers on the (as yet) undefined Arn.</li>
</ul>
<p>The missing piece is <a href="https://godoc.org/github.com/crewjam/go-cloudformation#Ref">gocf.Ref()</a>, whose single argument is the <em>Logical ID</em> of the S3 resource we&rsquo;ll be inserting in the decorator call.</p>
<h3 id="dynamic-iam-role-privilege">Dynamic IAM Role Privilege</h3>
<p>The <code>IAMRolePrivilege</code> struct references the dynamically assigned S3 Arn as follows:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go">
lambdaFn.Permissions = append(lambdaFn.Permissions, sparta.S3Permission{
  BasePermission: sparta.BasePermission{
    SourceArn: gocf.Ref(s3BucketResourceName),
  },
  Events: []<span style="color:#2b91af">string</span>{<span style="color:#a31515">&#34;s3:ObjectCreated:*&#34;</span>, <span style="color:#a31515">&#34;s3:ObjectRemoved:*&#34;</span>},
})
lambdaFn.DependsOn = append(lambdaFn.DependsOn, s3BucketResourceName)
</code></pre></div><h3 id="dynamic-s3-permissions">Dynamic S3 Permissions</h3>
<p>The <code>S3Permission</code> struct also requires the dynamic Arn, to which it will append <code>&quot;/*&quot;</code> to enable object read access.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go">
lambdaFn.RoleDefinition.Privileges = append(lambdaFn.RoleDefinition.Privileges,
  sparta.IAMRolePrivilege{
    Actions:  []<span style="color:#2b91af">string</span>{<span style="color:#a31515">&#34;s3:GetObject&#34;</span>, <span style="color:#a31515">&#34;s3:HeadObject&#34;</span>},
    Resource: spartaCF.S3AllKeysArnForBucket(gocf.Ref(s3BucketResourceName)),
  })
</code></pre></div><p>The <code>spartaCF.S3AllKeysArnForBucket</code> call is a convenience wrapper around <a href="https://godoc.org/github.com/crewjam/go-cloudformation#Join">gocf.Join</a> to generate the concatenated, dynamic Arn expression.</p>
<h2 id="s3-resource-insertion">S3 Resource Insertion</h2>
<p>All that&rsquo;s left to do is actually insert the S3 resource in our decorator:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go">s3Decorator := <span style="color:#00f">func</span>(serviceName <span style="color:#2b91af">string</span>,
  lambdaResourceName <span style="color:#2b91af">string</span>,
  lambdaResource gocf.LambdaFunction,
  resourceMetadata <span style="color:#00f">map</span>[<span style="color:#2b91af">string</span>]<span style="color:#00f">interface</span>{},
  S3Bucket <span style="color:#2b91af">string</span>,
  S3Key <span style="color:#2b91af">string</span>,
  buildID <span style="color:#2b91af">string</span>,
  template *gocf.Template,
  context <span style="color:#00f">map</span>[<span style="color:#2b91af">string</span>]<span style="color:#00f">interface</span>{},
  logger *zerolog.Logger) <span style="color:#2b91af">error</span> {
  cfResource := template.AddResource(s3BucketResourceName, &amp;gocf.S3Bucket{
    AccessControl: gocf.String(<span style="color:#a31515">&#34;PublicRead&#34;</span>),
    Tags: &amp;gocf.TagList{gocf.Tag{
      Key:   gocf.String(<span style="color:#a31515">&#34;SpecialKey&#34;</span>),
      Value: gocf.String(<span style="color:#a31515">&#34;SpecialValue&#34;</span>),
    },
    },
  })
  cfResource.DeletionPolicy = <span style="color:#a31515">&#34;Delete&#34;</span>
  <span style="color:#00f">return</span> <span style="color:#00f">nil</span>
}
lambdaFn.Decorators = []sparta.TemplateDecoratorHandler{
  sparta.TemplateDecoratorHookFunc(s3Decorator),
}
</code></pre></div><h3 id="dependencies">Dependencies</h3>
<p>In reality, we shouldn&rsquo;t even attempt to create the AWS Lambda function if the S3 bucket creation fails. As application developers, we can help CloudFormation sequence infrastructure operations by stating this hard dependency on the S3 bucket via the <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html">DependsOn</a> attribute:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go">lambdaFn.DependsOn = append(lambdaFn.DependsOn, s3BucketResourceName)
</code></pre></div><h2 id="code-listing">Code Listing</h2>
<p>Putting everything together, our Sparta lambda function with dynamic infrastructure is listed below.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-go" data-lang="go">
s3BucketResourceName := sparta.CloudFormationResourceName(<span style="color:#a31515">&#34;S3DynamicBucket&#34;</span>)
lambdaFn, _ := sparta.NewAWSLambda(sparta.LambdaName(echoS3DynamicBucketEvent),
  echoS3DynamicBucketEvent,
  sparta.IAMRoleDefinition{})

<span style="color:#008000">// Our lambda function requires the S3 bucket
</span><span style="color:#008000"></span>lambdaFn.DependsOn = append(lambdaFn.DependsOn, s3BucketResourceName)

<span style="color:#008000">// Add a permission s.t. the lambda function could read from the S3 bucket
</span><span style="color:#008000"></span>lambdaFn.RoleDefinition.Privileges = append(lambdaFn.RoleDefinition.Privileges,
  sparta.IAMRolePrivilege{
    Actions:  []<span style="color:#2b91af">string</span>{<span style="color:#a31515">&#34;s3:GetObject&#34;</span>,
                       <span style="color:#a31515">&#34;s3:HeadObject&#34;</span>},
    Resource: spartaCF.S3AllKeysArnForBucket(gocf.Ref(s3BucketResourceName)),
  })

<span style="color:#008000">// Configure the S3 event source
</span><span style="color:#008000"></span>lambdaFn.Permissions = append(lambdaFn.Permissions, sparta.S3Permission{
  BasePermission: sparta.BasePermission{
    SourceArn: gocf.Ref(s3BucketResourceName),
  },
  Events: []<span style="color:#2b91af">string</span>{<span style="color:#a31515">&#34;s3:ObjectCreated:*&#34;</span>,
                   <span style="color:#a31515">&#34;s3:ObjectRemoved:*&#34;</span>},
})

<span style="color:#008000">// Actually add the resource
</span><span style="color:#008000"></span>lambdaFn.Decorator = <span style="color:#00f">func</span>(lambdaResourceName <span style="color:#2b91af">string</span>,
                          lambdaResource gocf.LambdaFunction,
                          template *gocf.Template,
                          logger *zerolog.Logger) <span style="color:#2b91af">error</span> {
  cfResource := template.AddResource(s3BucketResourceName, &amp;gocf.S3Bucket{
    AccessControl: gocf.String(<span style="color:#a31515">&#34;PublicRead&#34;</span>),
  })
  cfResource.DeletionPolicy = <span style="color:#a31515">&#34;Delete&#34;</span>
  <span style="color:#00f">return</span> <span style="color:#00f">nil</span>
}
</code></pre></div><h2 id="wrapping-up">Wrapping Up</h2>
<p>Sparta provides an opportunity to bring infrastructure management into the
application programming model. It&rsquo;s still possible to use literal Arn strings,
but the ability to include other infrastructure requirements brings a service
closer to being self-contained and more operationally sustainable.</p>
<h1 id="notes">Notes</h1>
<ul>
<li>The <code>echoS3DynamicBucketEvent</code> function can also access the bucket Arn via <a href="/reference/discovery">sparta.Discover</a>.</li>
<li>See the <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html">DeletionPolicy</a> documentation regarding S3 management.</li>
<li>CloudFormation resources also publish <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-getatt.html">other outputs</a> that can be retrieved via <a href="https://godoc.org/github.com/crewjam/go-cloudformation#GetAtt">gocf.GetAtt</a>.</li>
<li><code>go-cloudformation</code> exposes <a href="https://godoc.org/github.com/mweagle/go-cloudformation#Join">gocf.Join</a> to create compound, dynamic expressions.
<ul>
<li>See the CloudWatch docs on <a href="http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-join.html">Fn::Join</a> for more information.</li>
</ul>
</li>
</ul>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/reference/decorators/s3_artifact_publisher/" title="S3 Artifact Publisher"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/reference/interceptors/" title="" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1610325426"></script>
    <script src="/js/perfect-scrollbar.min.js?1610325426"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1610325426"></script>
    <script src="/js/jquery.sticky.js?1610325426"></script>
    <script src="/js/featherlight.min.js?1610325426"></script>
    <script src="/js/highlight.pack.js?1610325426"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1610325426"></script>
    <script src="/js/learn.js?1610325426"></script>
    <script src="/js/hugo-learn.js?1610325426"></script>
    
        
            <script src="/mermaid/mermaid.js?1610325426"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70794971-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70794971-2');
</script>
  </body>
</html>

